//\n// StandardCard.swift\n// SecureChat\n//\n// Created by SecureChat Team on 2/13/2026.\n// Copyright 2025 SecureChat Development Team\n//\n\nimport UIKit\n\n/// A standardized card view component with consistent theming and styling\nclass StandardCard: UIView {\n    \n    // MARK: - Card Styles\n    enum Style {\n        case elevated     // Shadow with background\n        case outlined     // Border with background\n        case filled       // Background only\n        case minimal      // Subtle background\n    }\n    \n    enum Padding {\n        case none         // No padding\n        case small        // 8pt padding\n        case medium       // 16pt padding  \n        case large        // 24pt padding\n        case custom(CGFloat) // Custom padding value\n        \n        var value: CGFloat {\n            switch self {\n            case .none: return 0\n            case .small: return 8\n            case .medium: return 16\n            case .large: return 24\n            case .custom(let value): return value\n            }\n        }\n    }\n    \n    // MARK: - Properties\n    private var cardStyle: Style = .elevated\n    private var contentPadding: Padding = .medium\n    \n    /// Container view that holds the card content\n    private let contentContainer = UIView()\n    \n    /// The view where card content should be added\n    var contentView: UIView {\n        return contentContainer\n    }\n    \n    // MARK: - Initialization\n    init(style: Style = .elevated, padding: Padding = .medium) {\n        self.cardStyle = style\n        self.contentPadding = padding\n        super.init(frame: .zero)\n        setupCard()\n        setupThemeObserver()\n    }\n    \n    override init(frame: CGRect) {\n        super.init(frame: frame)\n        setupCard()\n        setupThemeObserver()\n    }\n    \n    required init?(coder: NSCoder) {\n        super.init(coder: coder)\n        setupCard()\n        setupThemeObserver()\n    }\n    \n    deinit {\n        NotificationCenter.default.removeObserver(self)\n    }\n    \n    // MARK: - Setup\n    private func setupCard() {\n        // Add content container\n        addSubview(contentContainer)\n        contentContainer.translatesAutoresizingMaskIntoConstraints = false\n        \n        let paddingValue = contentPadding.value\n        NSLayoutConstraint.activate([\n            contentContainer.topAnchor.constraint(equalTo: topAnchor, constant: paddingValue),\n            contentContainer.leadingAnchor.constraint(equalTo: leadingAnchor, constant: paddingValue),\n            contentContainer.trailingAnchor.constraint(equalTo: trailingAnchor, constant: -paddingValue),\n            contentContainer.bottomAnchor.constraint(equalTo: bottomAnchor, constant: -paddingValue)\n        ])\n        \n        // Apply card styling\n        applyCardStyling()\n    }\n    \n    private func setupThemeObserver() {\n        NotificationCenter.default.addObserver(\n            self,\n            selector: #selector(themeDidChange),\n            name: .themeDidChange,\n            object: nil\n        )\n    }\n    \n    @objc private func themeDidChange() {\n        applyCardStyling()\n    }\n    \n    // MARK: - Configuration\n    func configure(style: Style, padding: Padding = .medium) {\n        self.cardStyle = style\n        self.contentPadding = padding\n        \n        // Update constraints for new padding\n        let paddingValue = padding.value\n        contentContainer.removeFromSuperview()\n        addSubview(contentContainer)\n        contentContainer.translatesAutoresizingMaskIntoConstraints = false\n        \n        NSLayoutConstraint.activate([\n            contentContainer.topAnchor.constraint(equalTo: topAnchor, constant: paddingValue),\n            contentContainer.leadingAnchor.constraint(equalTo: leadingAnchor, constant: paddingValue),\n            contentContainer.trailingAnchor.constraint(equalTo: trailingAnchor, constant: -paddingValue),\n            contentContainer.bottomAnchor.constraint(equalTo: bottomAnchor, constant: -paddingValue)\n        ])\n        \n        applyCardStyling()\n    }\n    \n    private func applyCardStyling() {\n        // Reset previous styling\n        layer.shadowPath = nil\n        layer.shadowOpacity = 0\n        layer.borderWidth = 0\n        \n        switch cardStyle {\n        case .elevated:\n            backgroundColor = UIColor.secureChatCardBackground\n            layer.cornerRadius = 12\n            \n            // Add shadow\n            layer.shadowColor = UIColor.black.cgColor\n            layer.shadowOffset = CGSize(width: 0, height: 2)\n            layer.shadowRadius = 4\n            layer.shadowOpacity = 0.1\n            \n        case .outlined:\n            backgroundColor = UIColor.secureChatCardBackground\n            layer.cornerRadius = 12\n            layer.borderWidth = 1.0\n            layer.borderColor = UIColor.secureChatSeparator.cgColor\n            \n        case .filled:\n            backgroundColor = UIColor.secureChatCardBackground\n            layer.cornerRadius = 12\n            \n        case .minimal:\n            backgroundColor = UIColor.secureChatSecondaryBackground.withAlphaComponent(0.6)\n            layer.cornerRadius = 8\n        }\n        \n        // Ensure proper clipping\n        clipsToBounds = cardStyle != .elevated\n    }\n}\n\n// MARK: - Convenience Factory Methods\nextension StandardCard {\n    \n    /// Creates an elevated card with shadow\n    static func elevated(padding: Padding = .medium) -> StandardCard {\n        return StandardCard(style: .elevated, padding: padding)\n    }\n    \n    /// Creates an outlined card with border\n    static func outlined(padding: Padding = .medium) -> StandardCard {\n        return StandardCard(style: .outlined, padding: padding)\n    }\n    \n    /// Creates a filled card with background color only\n    static func filled(padding: Padding = .medium) -> StandardCard {\n        return StandardCard(style: .filled, padding: padding)\n    }\n    \n    /// Creates a minimal card with subtle background\n    static func minimal(padding: Padding = .medium) -> StandardCard {\n        return StandardCard(style: .minimal, padding: padding)\n    }\n}\n\n// MARK: - Content Helper Methods\nextension StandardCard {\n    \n    /// Adds a view to the card's content area\n    func addContentView(_ view: UIView) {\n        contentContainer.addSubview(view)\n    }\n    \n    /// Removes all content views from the card\n    func clearContent() {\n        contentContainer.subviews.forEach { $0.removeFromSuperview() }\n    }\n    \n    /// Creates a card with a title and content\n    static func withTitle(_ title: String, content: UIView? = nil, style: Style = .elevated) -> StandardCard {\n        let card = StandardCard(style: style, padding: .medium)\n        \n        let titleLabel = UILabel()\n        titleLabel.text = title\n        titleLabel.font = UIFont.systemFont(ofSize: 17, weight: .semibold)\n        titleLabel.textColor = UIColor.secureChatText\n        titleLabel.translatesAutoresizingMaskIntoConstraints = false\n        \n        card.addContentView(titleLabel)\n        NSLayoutConstraint.activate([\n            titleLabel.topAnchor.constraint(equalTo: card.contentView.topAnchor),\n            titleLabel.leadingAnchor.constraint(equalTo: card.contentView.leadingAnchor),\n            titleLabel.trailingAnchor.constraint(equalTo: card.contentView.trailingAnchor)\n        ])\n        \n        if let content = content {\n            content.translatesAutoresizingMaskIntoConstraints = false\n            card.addContentView(content)\n            NSLayoutConstraint.activate([\n                content.topAnchor.constraint(equalTo: titleLabel.bottomAnchor, constant: 12),\n                content.leadingAnchor.constraint(equalTo: card.contentView.leadingAnchor),\n                content.trailingAnchor.constraint(equalTo: card.contentView.trailingAnchor),\n                content.bottomAnchor.constraint(equalTo: card.contentView.bottomAnchor)\n            ])\n        } else {\n            titleLabel.bottomAnchor.constraint(equalTo: card.contentView.bottomAnchor).isActive = true\n        }\n        \n        return card\n    }\n}"